{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"aieng-bot-maintain","text":"<p>Centralized maintenance bot that automatically manages bot PRs (Dependabot and pre-commit-ci) across all Vector Institute repositories from a single location.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Organization-wide monitoring - Scans all VectorInstitute repos every 6 hours</li> <li>Auto-merge - Merges bot PRs (Dependabot and pre-commit-ci) when all checks pass</li> <li>Auto-fix - Fixes test failures, linting issues, security vulnerabilities, and build errors using Claude AI Agent SDK</li> <li>Centralized operation - No installation needed in individual repositories</li> <li>Smart detection - Categorizes failures and applies appropriate fix strategies</li> <li>Transparent - Comments on PRs with status updates</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  aieng-bot-maintain Repository  \u2502\n\u2502  (This Repo - Central Bot)      \u2502\n\u2502                                 \u2502\n\u2502  Runs every 6 hours:            \u2502\n\u2502  1. Scans VectorInstitute org   \u2502\n\u2502  2. Finds bot PRs               \u2502\n\u2502  3. Checks status               \u2502\n\u2502  4. Merges or fixes PRs         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u2502 Operates on\n               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   VectorInstitute Organization    \u2502\n\u2502                                   \u2502\n\u2502  \u251c\u2500 repo-1  (Bot PR #1)           \u2502\n\u2502  \u251c\u2500 repo-2  (Bot PR #2)           \u2502\n\u2502  \u251c\u2500 repo-3  (Bot PR #3)           \u2502\n\u2502  \u2514\u2500 repo-N  ...                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#setup-in-this-repository","title":"Setup (in this repository)","text":"<p>1. Create Anthropic API Key - Get from Anthropic Console - Add as repository secret: <code>ANTHROPIC_API_KEY</code></p> <p>2. Create GitHub Personal Access Token - Go to Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 Fine-grained tokens - Configure: Resource owner: <code>VectorInstitute</code>, Repository access: <code>All repositories</code> - Permissions: <code>contents: write</code>, <code>pull_requests: write</code>, <code>issues: write</code> - Add as repository secret: <code>ORG_ACCESS_TOKEN</code></p> <p>3. Enable GitHub Actions - Go to Actions tab \u2192 Enable workflows</p> <p>The bot now monitors all VectorInstitute repositories automatically.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<p>1. Monitor (every 6 hours) - Scans all VectorInstitute repositories for open bot PRs (Dependabot and pre-commit-ci) - Checks status of each PR - Routes to merge or fix workflow</p> <p>2. Auto-Merge (when all checks pass) - Approves PR and enables auto-merge - Comments with status - PR merges automatically</p> <p>3. Auto-Fix (when checks fail) - Clones target repository and PR branch - Analyzes failure type: test, lint, security, or build - Loads appropriate AI prompt template - Uses Claude Agent SDK to automatically apply fixes - Commits and pushes fixes to PR</p>"},{"location":"#configuration","title":"Configuration","text":"<p>Required Secrets - <code>ANTHROPIC_API_KEY</code> - Anthropic API access for Claude - <code>ORG_ACCESS_TOKEN</code> - GitHub PAT with org-wide permissions</p> <p>Workflows - <code>monitor-org-bot-prs.yml</code> - Scans org for bot PRs (Dependabot and pre-commit-ci) every 6 hours - <code>fix-remote-pr.yml</code> - Fixes failing PRs using AI</p> <p>AI Prompt Templates (customize for your needs) - <code>fix-merge-conflicts.md</code> - Resolve merge conflicts with best practices - <code>fix-test-failures.md</code> - Test failure resolution strategies - <code>fix-lint-failures.md</code> - Linting/formatting fixes - <code>fix-security-audit.md</code> - Security vulnerability handling - <code>fix-build-failures.md</code> - Build/compilation error fixes</p>"},{"location":"#capabilities","title":"Capabilities","text":"<p>Can fix: - Merge conflicts (dependency files, lock files, code) - Linting and formatting issues - Security vulnerabilities (dependency updates) - Simple test failures from API changes - Build configuration issues</p> <p>Cannot fix: - Complex logic errors - Breaking changes requiring refactoring - Issues requiring architectural decisions</p>"},{"location":"#manual-testing","title":"Manual Testing","text":"<p>Trigger via CLI: <pre><code># Monitor all repositories\ngh workflow run monitor-org-bot-prs.yml\n\n# Fix a specific PR (test with aieng-template-mvp#17)\ngh workflow run fix-remote-pr.yml \\\n  --field target_repo=\"VectorInstitute/aieng-template-mvp\" \\\n  --field pr_number=\"17\"\n</code></pre></p> <p>Trigger via GitHub UI: Actions \u2192 Select workflow \u2192 Run workflow \u2192 Enter parameters</p>"},{"location":"#dashboard","title":"Dashboard","text":"<p>View comprehensive analytics and agent execution traces: - \ud83d\udcca Bot Dashboard - Interactive dashboard with:   - Overview table of all bot PR fixes   - Success rates and performance metrics   - Detailed agent execution traces (like LangSmith/Langfuse)   - Code diffs with syntax highlighting   - Failure analysis and reasoning timeline</p> <p>Features: - Real-time PR status tracking - Agent observability (tool calls, reasoning, actions) - Historical metrics and trends - Per-repo and per-failure-type analytics - Sortable/filterable PR table</p> <p>Authentication: - Restricted to @vectorinstitute.ai email addresses - Google OAuth 2.0 sign-in</p>"},{"location":"#monitoring","title":"Monitoring","text":"<p>View bot activity: - Dashboard - Comprehensive analytics and traces - Actions tab - All workflow runs and success/failure rates - PR comments - Detailed status updates on each PR - Run summary - PR count and actions taken per run</p> <p>Debug commands: <pre><code># View recent workflow runs\ngh run list --workflow=monitor-org-bot-prs.yml --limit 5\n\n# View logs for specific run\ngh run view RUN_ID --log\n\n# Collect metrics manually\ngh workflow run collect-bot-metrics.yml\n</code></pre></p>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Setup Guide - Detailed configuration and permissions</li> <li>Deployment Guide - Rollout strategy and monitoring</li> <li>Testing Guide - Test cases and validation</li> </ul>"},{"location":"#troubleshooting","title":"Troubleshooting","text":"Issue Solution Workflow doesn't run Check Actions enabled and secrets are set Can't find PRs Verify <code>ORG_ACCESS_TOKEN</code> has correct permissions Can't merge PRs Ensure token has <code>contents: write</code> permission Can't push fixes Check token has write access to target repos Claude API errors Verify <code>ANTHROPIC_API_KEY</code> is valid Rate limits Reduce monitoring frequency in workflow cron schedule <p>See Setup Guide for detailed troubleshooting.</p> <p>\ud83e\udd16 AI Engineering Maintenance Bot - Maintaining Vector Institute Repositories built by AI Engineering</p>"},{"location":"deployment/","title":"Deployment Guide","text":""},{"location":"deployment/#overview","title":"Overview","text":"<p>Deploying the AI Engineering Maintenance Bot is simple - it runs from ONE central repository and requires NO installation in individual repositories.</p>"},{"location":"deployment/#deployment-checklist","title":"Deployment Checklist","text":""},{"location":"deployment/#phase-1-initial-setup-30-minutes","title":"Phase 1: Initial Setup (30 minutes)","text":"<ul> <li>[ ] 1.1: Create Anthropic API key</li> <li>[ ] 1.2: Create GitHub PAT with org-wide access</li> <li>[ ] 1.3: Add secrets to this repository</li> <li><code>ANTHROPIC_API_KEY</code></li> <li><code>ORG_ACCESS_TOKEN</code></li> <li>[ ] 1.4: Enable GitHub Actions</li> <li>[ ] 1.5: Verify workflows appear in Actions tab</li> </ul>"},{"location":"deployment/#phase-2-testing-1-2-hours","title":"Phase 2: Testing (1-2 hours)","text":"<ul> <li>[ ] 2.1: Manual test run of monitor workflow   <pre><code>gh workflow run monitor-org-bot-prs.yml \\\n  --repo VectorInstitute/aieng-bot-maintain\n</code></pre></li> <li>[ ] 2.2: Test fix workflow on specific PR   <pre><code>gh workflow run fix-remote-pr.yml \\\n  --repo VectorInstitute/aieng-bot-maintain \\\n  --field target_repo=\"VectorInstitute/aieng-template-mvp\" \\\n  --field pr_number=\"17\"\n</code></pre></li> <li>[ ] 2.3: Verify bot comments appear on test PR</li> <li>[ ] 2.4: Check workflow logs for errors</li> <li>[ ] 2.5: Confirm bot can access org repos</li> </ul>"},{"location":"deployment/#phase-3-limited-monitoring-week-1-2","title":"Phase 3: Limited Monitoring (Week 1-2)","text":"<ul> <li>[ ] 3.1: Enable scheduled runs (automatic every 6 hours)</li> <li>[ ] 3.2: Monitor for 2-3 days</li> <li>[ ] 3.3: Check PRs the bot processes</li> <li>[ ] 3.4: Verify auto-merge works correctly</li> <li>[ ] 3.5: Review any fixes the bot applies</li> <li>[ ] 3.6: Adjust prompt templates if needed</li> </ul>"},{"location":"deployment/#phase-4-full-production-week-3","title":"Phase 4: Full Production (Week 3+)","text":"<ul> <li>[ ] 4.1: Confirm bot stability</li> <li>[ ] 4.2: Enable auto-merge in more repos</li> <li>[ ] 4.3: Announce to VectorInstitute team</li> <li>[ ] 4.4: Document any customizations made</li> <li>[ ] 4.5: Set up monitoring dashboard</li> </ul>"},{"location":"deployment/#quick-deployment","title":"Quick Deployment","text":"<p>For experienced admins who just want to get it running:</p> <pre><code># 1. Add secrets via GitHub UI\n# Settings \u2192 Secrets \u2192 Actions \u2192 New secret\n# - ANTHROPIC_API_KEY\n# - ORG_ACCESS_TOKEN\n\n# 2. Enable workflows\n# Actions tab \u2192 Enable workflows\n\n# 3. Test\ngh workflow run monitor-org-bot-prs.yml --repo VectorInstitute/aieng-bot-maintain\n\n# 4. Monitor\n# Check Actions tab for runs every 6 hours\n</code></pre>"},{"location":"deployment/#what-happens-after-deployment","title":"What Happens After Deployment","text":""},{"location":"deployment/#first-6-hours","title":"First 6 Hours","text":"<ul> <li>Monitor workflow runs automatically</li> <li>Scans all VectorInstitute repos</li> <li>Finds any open Dependabot PRs</li> <li>Processes passing PRs (auto-merge)</li> <li>Triggers fixes for failing PRs</li> <li>Bot comments appear on processed PRs</li> <li>Auto-merges happen for passing PRs</li> <li>Fix attempts made on failing PRs</li> </ul>"},{"location":"deployment/#first-day","title":"First Day","text":"<ul> <li>4 scan cycles (every 6 hours)</li> <li>All active Dependabot PRs processed</li> <li>Pattern of bot behavior visible</li> <li>Any issues surface quickly</li> </ul>"},{"location":"deployment/#first-week","title":"First Week","text":"<ul> <li>Bot handles most Dependabot PRs automatically</li> <li>Team sees reduced manual PR review load</li> <li>Fix success rate becomes clear</li> <li>Prompt adjustments may be needed</li> </ul>"},{"location":"deployment/#monitoring-after-deployment","title":"Monitoring After Deployment","text":""},{"location":"deployment/#daily-checks-first-2-weeks","title":"Daily Checks (First 2 Weeks)","text":"<p>Monitor these metrics: <pre><code># Check recent runs\ngh run list --workflow=monitor-org-bot-prs.yml --limit 10\n\n# Check for failures\ngh run list --workflow=monitor-org-bot-prs.yml --status failure --limit 5\n\n# View specific run\ngh run view RUN_ID --log\n</code></pre></p> <p>Track: - PRs found per run - PRs auto-merged - PRs fixed successfully - Any workflow failures - API errors or rate limits</p>"},{"location":"deployment/#weekly-review","title":"Weekly Review","text":"<p>Review bot activity: 1. Actions tab: Check run success rate 2. Across org repos: Find PRs with bot comments 3. Merged PRs: Verify quality of auto-merged changes 4. Fixed PRs: Check if fixes worked correctly 5. Metrics: Count successes vs failures</p>"},{"location":"deployment/#success-metrics","title":"Success Metrics","text":"<p>Target metrics after 2 weeks: - \u2705 Monitor workflow: 95%+ success rate - \u2705 Auto-merge: 90%+ of passing PRs merged - \u2705 Auto-fix: 50%+ of fixable issues resolved - \u2705 False positives: 0 (no incorrect merges) - \u2705 Team feedback: Positive</p>"},{"location":"deployment/#common-post-deployment-adjustments","title":"Common Post-Deployment Adjustments","text":""},{"location":"deployment/#adjust-scan-frequency","title":"Adjust Scan Frequency","text":"<p>If you want more or less frequent scanning:</p> <pre><code># .github/workflows/monitor-org-bot-prs.yml\non:\n  schedule:\n    - cron: '0 */12 * * *'  # Every 12 hours (less frequent)\n    # or\n    - cron: '0 */3 * * *'   # Every 3 hours (more frequent)\n</code></pre>"},{"location":"deployment/#exclude-specific-repositories","title":"Exclude Specific Repositories","text":"<p>If certain repos need manual review:</p> <pre><code># In monitor-org-bot-prs.yml, after getting REPOS\nREPOS=$(echo \"$REPOS\" | grep -v \"critical-production-repo\")\nREPOS=$(echo \"$REPOS\" | grep -v \"experimental-repo\")\n</code></pre>"},{"location":"deployment/#adjust-fix-aggressiveness","title":"Adjust Fix Aggressiveness","text":"<p>If bot makes too many/few fix attempts:</p> <p>Edit <code>.github/prompts/</code> templates to be more/less aggressive in fixes.</p>"},{"location":"deployment/#fine-tune-merge-criteria","title":"Fine-Tune Merge Criteria","text":"<p>If auto-merging incorrectly:</p> <pre><code># In monitor-org-bot-prs.yml, adjust check logic\n# Add filters for specific check names or PR titles\n</code></pre>"},{"location":"deployment/#rollback-plan","title":"Rollback Plan","text":"<p>If something goes wrong:</p>"},{"location":"deployment/#immediate-disable-30-seconds","title":"Immediate Disable (30 seconds)","text":"<pre><code># Disable scheduled runs\ngh workflow disable monitor-org-bot-prs.yml \\\n  --repo VectorInstitute/aieng-bot-maintain\n</code></pre> <p>Or via GitHub UI: 1. Actions \u2192 Monitor Organization Bot PRs 2. Click \"...\" \u2192 Disable workflow</p>"},{"location":"deployment/#investigation-while-disabled","title":"Investigation (While Disabled)","text":"<ol> <li>Check recent workflow runs for errors</li> <li>Review PRs the bot touched recently</li> <li>Check for incorrect merges or fixes</li> <li>Identify the issue</li> </ol>"},{"location":"deployment/#fix-and-re-enable","title":"Fix and Re-enable","text":"<ol> <li>Make necessary corrections (prompts, logic, secrets)</li> <li>Test manually first</li> <li>Re-enable workflow:    <pre><code>gh workflow enable monitor-org-bot-prs.yml\n</code></pre></li> </ol>"},{"location":"deployment/#full-rollback-if-needed","title":"Full Rollback (If Needed)","text":"<p>The bot makes no permanent infrastructure changes: - Remove secrets from repository - Disable workflows - No cleanup needed in target repositories - Bot comments remain (harmless documentation)</p>"},{"location":"deployment/#cost-estimation","title":"Cost Estimation","text":""},{"location":"deployment/#claude-api-costs","title":"Claude API Costs","text":"<p>Assuming: - 10 Dependabot PRs/day across org - 50% need fixes (5/day) - ~2000 tokens per fix request - Claude Sonnet: ~$0.001 per 1K tokens</p> <p>Estimated cost: $0.01-0.05 per day = $0.30-1.50 per month</p>"},{"location":"deployment/#github-api-costs","title":"GitHub API Costs","text":"<ul> <li>Organization scanning: Free (read operations)</li> <li>PR operations: Free (within rate limits)</li> <li>Actions minutes: Free for public repos, included in plan for private</li> </ul> <p>Total estimated cost: &lt;$2/month</p>"},{"location":"deployment/#team-communication","title":"Team Communication","text":""},{"location":"deployment/#announcement-template","title":"Announcement Template","text":"<pre><code>## \ud83e\udd16 New: AI Engineering Maintenance Bot\n\nWe've deployed an automated bot to help manage Dependabot PRs across all VectorInstitute repositories.\n\n**What it does:**\n- Automatically merges Dependabot PRs when all checks pass\n- Attempts to fix common issues (linting, tests, security) in failing PRs\n- Leaves comments on PRs it processes\n\n**What you need to do:**\n- Nothing! The bot works automatically\n- You can still manually review and merge if you prefer\n- Report any issues to the AI Engineering team\n\n**More info:** https://github.com/VectorInstitute/aieng-bot-maintain\n</code></pre> <p>Post in: - Organization Slack/Teams channel - Team meetings - Internal wiki/docs</p>"},{"location":"deployment/#long-term-maintenance","title":"Long-Term Maintenance","text":""},{"location":"deployment/#monthly-tasks","title":"Monthly Tasks","text":"<ul> <li>Review bot effectiveness</li> <li>Update prompts based on patterns</li> <li>Check API costs vs budget</li> <li>Rotate tokens if needed</li> </ul>"},{"location":"deployment/#quarterly-tasks","title":"Quarterly Tasks","text":"<ul> <li>Analyze metrics and trends</li> <li>Consider feature enhancements</li> <li>Update to new Gemini models</li> <li>Review security and permissions</li> </ul>"},{"location":"deployment/#annual-tasks","title":"Annual Tasks","text":"<ul> <li>Full security audit</li> <li>Architecture review</li> <li>Cost-benefit analysis</li> <li>Team satisfaction survey</li> </ul>"},{"location":"deployment/#scaling-considerations","title":"Scaling Considerations","text":""},{"location":"deployment/#current-capacity","title":"Current Capacity","text":"<ul> <li>Handles 100s of repos</li> <li>Processes unlimited PRs</li> <li>Limited by: GitHub API rate limits, Claude API quota</li> </ul>"},{"location":"deployment/#if-scaling-needed","title":"If Scaling Needed","text":"<ul> <li>Increase Claude API quota</li> <li>Use GitHub App instead of PAT (higher rate limits)</li> <li>Shard by repository (multiple bot instances)</li> <li>Cache PR status to reduce API calls</li> </ul>"},{"location":"deployment/#support-and-updates","title":"Support and Updates","text":""},{"location":"deployment/#getting-updates","title":"Getting Updates","text":"<p>Watch this repository for: - Bug fixes - New features - Improved prompts - Gemini model updates</p>"},{"location":"deployment/#contributing-improvements","title":"Contributing Improvements","text":"<p>Submit PRs with: - Better prompt templates - Enhanced error handling - New failure type detection - Improved logging</p> <p>\ud83e\udd16 AI Engineering Maintenance Bot - Maintaining Vector Institute Repositories built by AI Engineering</p>"},{"location":"setup/","title":"AI Engineering Maintenance Bot - Setup Guide","text":""},{"location":"setup/#overview","title":"Overview","text":"<p>This centralized bot operates from THIS repository and manages Dependabot PRs across ALL VectorInstitute repositories. No installation needed in individual repos.</p>"},{"location":"setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>[ ] Admin access to VectorInstitute organization</li> <li>[ ] Ability to create organization secrets</li> <li>[ ] Anthropic API key</li> <li>[ ] GitHub Personal Access Token with org-wide permissions</li> </ul>"},{"location":"setup/#setup-steps","title":"Setup Steps","text":""},{"location":"setup/#1-create-claude-api-key","title":"1. Create Claude API Key","text":"<ol> <li>Go to Anthropic Console</li> <li>Sign in with your Google account</li> <li>Click \"Create API Key\"</li> <li>Copy the key (starts with <code>AIza...</code>)</li> <li>Keep it secure - you'll add it as a secret</li> </ol>"},{"location":"setup/#2-create-github-personal-access-token","title":"2. Create GitHub Personal Access Token","text":"<p>Option A: Fine-grained Token (Recommended)</p> <ol> <li>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 Fine-grained tokens</li> <li>Click \"Generate new token\"</li> <li>Configure:</li> <li>Token name: <code>aieng-bot-maintain-org-access</code></li> <li>Expiration: 1 year (or longer)</li> <li>Resource owner: VectorInstitute</li> <li>Repository access: All repositories</li> <li>Permissions:<ul> <li>Repository permissions:</li> <li><code>contents</code>: Read and write</li> <li><code>pull_requests</code>: Read and write</li> <li><code>issues</code>: Read and write</li> <li><code>metadata</code>: Read-only (automatic)</li> <li>Organization permissions:</li> <li><code>members</code>: Read-only (for org scanning)</li> </ul> </li> <li>Click \"Generate token\"</li> <li>Copy the token (starts with <code>github_pat_...</code>)</li> </ol> <p>Option B: Classic Token (Alternative)</p> <ol> <li>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens (classic)</li> <li>Click \"Generate new token (classic)\"</li> <li>Configure:</li> <li>Note: <code>aieng-bot-maintain-org-access</code></li> <li>Expiration: 1 year (or longer)</li> <li>Scopes: Select:<ul> <li><code>repo</code> (Full control of private repositories)</li> <li><code>workflow</code> (Update GitHub Action workflows)</li> <li><code>read:org</code> (Read org and team membership)</li> </ul> </li> <li>Click \"Generate token\"</li> <li>Copy the token (starts with <code>ghp_...</code>)</li> </ol>"},{"location":"setup/#3-add-secrets-to-this-repository","title":"3. Add Secrets to This Repository","text":"<ol> <li>Go to this repository: <code>VectorInstitute/aieng-bot-maintain</code></li> <li>Navigate to Settings \u2192 Secrets and variables \u2192 Actions</li> <li>Click \"New repository secret\"</li> </ol> <p>Add ANTHROPIC_API_KEY: - Name: <code>ANTHROPIC_API_KEY</code> - Secret: [Paste your Anthropic API key] - Click \"Add secret\"</p> <p>Add ORG_ACCESS_TOKEN: - Name: <code>ORG_ACCESS_TOKEN</code> - Secret: [Paste your GitHub PAT] - Click \"Add secret\"</p>"},{"location":"setup/#4-enable-github-actions","title":"4. Enable GitHub Actions","text":"<ol> <li>In this repository, go to Actions tab</li> <li>If actions are disabled, click \"I understand my workflows, go ahead and enable them\"</li> <li>Verify workflows appear:</li> <li>Monitor Organization Dependabot PRs</li> <li>Fix Remote Repository PR</li> </ol>"},{"location":"setup/#5-enable-auto-merge-in-target-repositories-optional","title":"5. Enable Auto-Merge in Target Repositories (Optional)","text":"<p>For best results, enable auto-merge in repos you want the bot to manage:</p> <ol> <li>Go to each target repository</li> <li>Settings \u2192 General \u2192 Pull Requests</li> <li>Check \u2611 \"Allow auto-merge\"</li> <li>Save changes</li> </ol> <p>Note: This can be done later as needed. The bot will still approve PRs even if auto-merge is not enabled.</p>"},{"location":"setup/#6-test-the-setup","title":"6. Test the Setup","text":""},{"location":"setup/#manual-test-run","title":"Manual Test Run","text":"<ol> <li>Go to Actions tab in this repository</li> <li>Select \"Monitor Organization Dependabot PRs\"</li> <li>Click \"Run workflow\"</li> <li>Click \"Run workflow\" button (leave fields empty for org-wide scan)</li> <li>Wait for completion (usually 1-2 minutes)</li> <li>Check the workflow run summary for results</li> </ol>"},{"location":"setup/#test-with-specific-pr","title":"Test with Specific PR","text":"<p>Test against aieng-template-mvp#17:</p> <pre><code>gh workflow run fix-remote-pr.yml \\\n  --repo VectorInstitute/aieng-bot-maintain \\\n  --field target_repo=\"VectorInstitute/aieng-template-mvp\" \\\n  --field pr_number=\"17\"\n</code></pre> <p>Or via GitHub UI: 1. Actions \u2192 Fix Remote Repository PR 2. Run workflow 3. Enter:    - target_repo: <code>VectorInstitute/aieng-template-mvp</code>    - pr_number: <code>17</code> 4. Click \"Run workflow\"</p>"},{"location":"setup/#7-verify-bot-operation","title":"7. Verify Bot Operation","text":"<p>After setup, the bot should:</p> <p>\u2705 Run automatically every 6 hours \u2705 Scan all VectorInstitute repositories \u2705 Find open Dependabot PRs \u2705 Auto-merge PRs with passing checks \u2705 Trigger fixes for PRs with failures \u2705 Leave comments on PRs it processes</p> <p>Check the Actions tab for workflow runs and PR comments for bot activity.</p>"},{"location":"setup/#configuration","title":"Configuration","text":""},{"location":"setup/#adjust-monitoring-frequency","title":"Adjust Monitoring Frequency","text":"<p>Edit <code>.github/workflows/monitor-org-bot-prs.yml</code>:</p> <pre><code>on:\n  schedule:\n    - cron: '0 */6 * * *'   # Every 6 hours (current default)\n    # Change to:\n    # - cron: '0 */3 * * *'   # Every 3 hours\n    # - cron: '0 */12 * * *'  # Every 12 hours\n    # - cron: '0 0 * * *'     # Once daily at midnight\n</code></pre>"},{"location":"setup/#customize-fix-prompts","title":"Customize Fix Prompts","text":"<p>Edit prompt templates in <code>.github/prompts/</code>: - <code>fix-test-failures.md</code> - <code>fix-lint-failures.md</code> - <code>fix-security-audit.md</code> - <code>fix-build-failures.md</code></p> <p>Add repository-specific context, commands, or strategies.</p>"},{"location":"setup/#filter-repositories","title":"Filter Repositories","text":"<p>To exclude certain repos from monitoring, edit <code>monitor-org-bot-prs.yml</code>:</p> <pre><code># After getting repos list\nREPOS=$(echo \"$REPOS\" | grep -v \"repo-to-exclude\")\nREPOS=$(echo \"$REPOS\" | grep -v \"another-repo-to-exclude\")\n</code></pre>"},{"location":"setup/#change-gemini-model","title":"Change Gemini Model","text":"<p>Edit <code>.github/workflows/fix-remote-pr.yml</code>:</p> <pre><code>- name: Setup Gemini CLI\n  uses: google-github-actions/run-gemini-cli@v1\n  with:\n    gemini_model: 'gemini-3-pro-preview'  # Current\n    # Options:\n    #   gemini-2.0-flash-exp  (faster, lower cost)\n    #   gemini-1.5-pro        (more tested, stable)\n</code></pre>"},{"location":"setup/#security-considerations","title":"Security Considerations","text":""},{"location":"setup/#token-permissions","title":"Token Permissions","text":"<p>The <code>ORG_ACCESS_TOKEN</code> has broad access. Best practices: - \u2705 Use fine-grained token when possible - \u2705 Set token expiration (rotate annually) - \u2705 Monitor token usage in GitHub audit log - \u2705 Revoke and rotate if compromised - \u274c Never commit tokens to repository - \u274c Never share tokens via insecure channels</p>"},{"location":"setup/#api-key-protection","title":"API Key Protection","text":"<p>The <code>ANTHROPIC_API_KEY</code> provides AI access: - \u2705 Monitor API usage and costs - \u2705 Set usage quotas in Google Cloud - \u2705 Rotate key periodically - \u2705 Use separate key per environment (if needed)</p>"},{"location":"setup/#bot-actions-audit","title":"Bot Actions Audit","text":"<p>Regularly review bot actions: - Check PR comments for inappropriate changes - Review merged PRs for correctness - Monitor for false positives - Adjust prompts if bot makes mistakes</p>"},{"location":"setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"setup/#bot-not-finding-prs","title":"Bot Not Finding PRs","text":"<p>Check: <code>ORG_ACCESS_TOKEN</code> permissions <pre><code># Test token access\ngh api user -H \"Authorization: token $ORG_ACCESS_TOKEN\"\n\n# Test org access\ngh api orgs/VectorInstitute/repos -H \"Authorization: token $ORG_ACCESS_TOKEN\"\n</code></pre></p>"},{"location":"setup/#bot-cant-merge-prs","title":"Bot Can't Merge PRs","text":"<p>Possible causes: - Auto-merge not enabled in target repo - Branch protection rules blocking - Required reviews not satisfied - Token lacks permissions</p> <p>Solution: Check target repo settings and ensure token has <code>contents: write</code></p>"},{"location":"setup/#bot-cant-push-fixes","title":"Bot Can't Push Fixes","text":"<p>Check: Token permissions and branch protection <pre><code># Test write access to a repo\ngh api repos/VectorInstitute/TEST_REPO/collaborators/USERNAME/permission\n</code></pre></p> <p>Solution: Ensure token has write access and branch protection allows bot pushes</p>"},{"location":"setup/#claude-api-errors","title":"Claude API Errors","text":"<p>Common issues: - Invalid API key - Quota exceeded - Model not available - Request too large</p> <p>Check quota: Visit Anthropic Console</p> <p>Solution: Verify key, check quota, consider upgrading plan</p>"},{"location":"setup/#workflow-not-running","title":"Workflow Not Running","text":"<p>Check: 1. Actions enabled in repository 2. Secrets set correctly 3. Workflow file syntax valid 4. Cron schedule correct (uses UTC)</p> <pre><code># Test workflow manually\ngh workflow run monitor-org-bot-prs.yml\n</code></pre>"},{"location":"setup/#maintenance","title":"Maintenance","text":""},{"location":"setup/#weekly-tasks","title":"Weekly Tasks","text":"<ul> <li>[ ] Review workflow runs for errors</li> <li>[ ] Check PR comments for bot activity</li> <li>[ ] Monitor API costs (Gemini and GitHub)</li> <li>[ ] Verify bot is finding and processing PRs</li> </ul>"},{"location":"setup/#monthly-tasks","title":"Monthly Tasks","text":"<ul> <li>[ ] Review merged PRs for quality</li> <li>[ ] Update prompt templates based on patterns</li> <li>[ ] Check for new Gemini models or features</li> <li>[ ] Audit token usage and permissions</li> </ul>"},{"location":"setup/#quarterly-tasks","title":"Quarterly Tasks","text":"<ul> <li>[ ] Rotate tokens (if policy requires)</li> <li>[ ] Review and update documentation</li> <li>[ ] Analyze bot effectiveness metrics</li> <li>[ ] Consider architecture improvements</li> </ul>"},{"location":"setup/#support","title":"Support","text":""},{"location":"setup/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Issues: Open issue in this repository</li> <li>Workflow Logs: Actions tab \u2192 Select run \u2192 View logs</li> <li>AI Engineering Team: Contact for urgent issues</li> </ul>"},{"location":"setup/#reporting-problems","title":"Reporting Problems","text":"<p>When reporting issues, include: 1. Workflow run URL 2. Target repository and PR number 3. Expected vs actual behavior 4. Relevant workflow logs 5. Error messages</p> <p>\ud83e\udd16 AI Engineering Maintenance Bot - Maintaining Vector Institute Repositories built by AI Engineering</p>"},{"location":"testing/","title":"Testing Guide","text":""},{"location":"testing/#test-environment-setup","title":"Test Environment Setup","text":"<ol> <li>Fork a repository or use a test repository</li> <li>Enable Dependabot: Settings \u2192 Security \u2192 Dependabot</li> <li>Install workflows: Copy <code>.github/workflows/</code> to test repo</li> <li>Add secrets: Set <code>ANTHROPIC_API_KEY</code></li> <li>Enable auto-merge: Settings \u2192 General \u2192 Pull Requests</li> </ol>"},{"location":"testing/#test-cases","title":"Test Cases","text":""},{"location":"testing/#test-case-1-auto-merge-success","title":"Test Case 1: Auto-Merge Success","text":"<p>Goal: Verify bot auto-merges PRs when all checks pass</p> <p>Steps: 1. Wait for or create Dependabot PR 2. Ensure all checks pass 3. Monitor workflow: <code>auto-merge-dependabot</code></p> <p>Expected: - Bot approves PR with comment - Auto-merge enabled - PR merges automatically - Success comment posted</p>"},{"location":"testing/#test-case-2-fix-test-failures","title":"Test Case 2: Fix Test Failures","text":"<p>Goal: Verify bot fixes failing tests</p> <p>Test PR: aieng-template-mvp#17</p> <p>Steps: 1. Trigger on PR with frontend-tests failing 2. Monitor workflow: <code>fix-failing-pr</code> 3. Check bot comments 4. Review pushed changes</p> <p>Expected: - Bot detects test failure - Comments \"Attempting to fix\" - Pushes fix commit - Comments result</p>"},{"location":"testing/#test-case-3-fix-linting-issues","title":"Test Case 3: Fix Linting Issues","text":"<p>Goal: Verify bot fixes linting problems</p> <p>Setup: 1. Create PR that introduces linting errors 2. Ensure linting checks fail</p> <p>Expected: - Bot identifies lint failures - Runs auto-fixers (eslint --fix, prettier, black) - Commits fixes - Checks pass</p>"},{"location":"testing/#test-case-4-security-vulnerabilities","title":"Test Case 4: Security Vulnerabilities","text":"<p>Goal: Verify bot updates vulnerable dependencies</p> <p>Setup: 1. Dependabot PR with pip-audit failures 2. Security scan shows CVEs</p> <p>Expected: - Bot identifies vulnerable packages - Updates to patched versions - Updates requirements.txt - Commits with CVE references</p>"},{"location":"testing/#test-case-5-build-failures","title":"Test Case 5: Build Failures","text":"<p>Goal: Verify bot fixes build errors</p> <p>Setup: 1. PR with TypeScript compilation errors 2. Build check fails</p> <p>Expected: - Bot analyzes build logs - Identifies type errors - Updates type definitions - Build passes</p>"},{"location":"testing/#test-case-6-manual-intervention-required","title":"Test Case 6: Manual Intervention Required","text":"<p>Goal: Verify bot correctly identifies unfixable issues</p> <p>Setup: 1. PR with complex breaking changes 2. Multiple critical failures</p> <p>Expected: - Bot attempts fix - Recognizes limitations - Comments: \"Could not automatically fix\" - Suggests manual review</p>"},{"location":"testing/#manual-testing","title":"Manual Testing","text":""},{"location":"testing/#trigger-workflows-manually","title":"Trigger Workflows Manually","text":"<pre><code># Using GitHub CLI\ngh workflow run auto-merge-dependabot.yml --repo VectorInstitute/your-repo\n\n# Or via Actions tab:\n# Actions \u2192 Select workflow \u2192 Run workflow\n</code></pre>"},{"location":"testing/#test-individual-components","title":"Test Individual Components","text":"<p>Test prompt loading: <pre><code># Check prompt files exist and are valid markdown\nfind .github/prompts -name \"*.md\" -exec md_lint {} \\;\n</code></pre></p> <p>Test failure detection: <pre><code># Simulate failure detection\ngh pr view PR_NUMBER --json statusCheckRollup\n</code></pre></p> <p>Test Claude API: <pre><code># Verify API key works\ncurl -H \"Authorization: Bearer $ANTHROPIC_API_KEY\" \\\n  https://generativelanguage.googleapis.com/v1beta/models\n</code></pre></p>"},{"location":"testing/#integration-testing","title":"Integration Testing","text":""},{"location":"testing/#test-across-multiple-repos","title":"Test Across Multiple Repos","text":"<ol> <li>Select diverse repos:</li> <li>Python project</li> <li>JavaScript/TypeScript project</li> <li> <p>Mixed stack project</p> </li> <li> <p>Test different scenarios:</p> </li> <li>Patch updates (x.y.Z)</li> <li>Minor updates (x.Y.0)</li> <li>Major updates (X.0.0)</li> <li>Security updates</li> <li> <p>Multiple dependency updates</p> </li> <li> <p>Monitor for:</p> </li> <li>False positives (incorrect merges)</li> <li>False negatives (missed opportunities)</li> <li>Failed fixes (bot breaks things)</li> <li>API errors (Gemini failures)</li> </ol>"},{"location":"testing/#rollback-testing","title":"Rollback Testing","text":"<p>Scenario: Bot makes incorrect changes</p> <p>Steps: 1. Create PR with intentional issues 2. Let bot attempt fix 3. Verify rollback mechanism 4. Check git history</p> <p>Expected: - Commits are atomic - Easy to revert - No data loss - Clear commit messages</p>"},{"location":"testing/#performance-testing","title":"Performance Testing","text":""},{"location":"testing/#metrics-to-track","title":"Metrics to Track","text":"<pre><code># Average time to auto-merge\n# Average time to fix\n# Success rate (fixes / attempts)\n# API call count\n# Cost per fix (Claude API)\n</code></pre>"},{"location":"testing/#load-testing","title":"Load Testing","text":"<p>Scenario: Multiple PRs simultaneously</p> <p>Setup: 1. Create 10+ Dependabot PRs 2. Some passing, some failing 3. Monitor workflow queue</p> <p>Expected: - All PRs processed - No race conditions - No duplicate fixes - Workflows don't block each other</p>"},{"location":"testing/#debugging-tests","title":"Debugging Tests","text":""},{"location":"testing/#check-workflow-logs","title":"Check Workflow Logs","text":"<pre><code># Get latest run for a workflow\ngh run list --workflow=auto-merge-dependabot.yml --limit 1\n\n# View logs\ngh run view RUN_ID --log\n\n# Download logs\ngh run download RUN_ID\n</code></pre>"},{"location":"testing/#common-issues","title":"Common Issues","text":"Issue Debug Steps Workflow doesn't trigger Check event triggers, PR author API errors Verify secrets, check quotas Fixes don't work Review prompt, check model Can't push Check permissions, branch protection"},{"location":"testing/#test-documentation","title":"Test Documentation","text":"<p>Record test results: <pre><code>## Test Run: YYYY-MM-DD\n\n**Environment**: [staging/production/test-repo]\n**Test Cases**: [list]\n**Results**: [pass/fail counts]\n**Issues Found**: [list]\n**Actions Taken**: [fixes applied]\n</code></pre></p>"},{"location":"testing/#continuous-testing","title":"Continuous Testing","text":"<p>Schedule regular tests: - Weekly: Run test suite - Monthly: Load testing - Quarterly: Full integration test - After changes: Regression testing</p>"},{"location":"testing/#success-criteria","title":"Success Criteria","text":"<p>\u2705 Auto-merge: 95%+ success rate \u2705 Auto-fix: 70%+ success rate \u2705 No false positives: 0 incorrect merges \u2705 Fast execution: &lt;5min average \u2705 Cost effective: &lt;$1 per fix average</p> <p>\ud83e\udd16 AI Engineering Maintenance Bot - Maintaining Vector Institute Repositories built by AI Engineering</p>"}]}